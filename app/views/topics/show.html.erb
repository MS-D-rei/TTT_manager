<% provide(:button_name, 'create task') %>
<h3><%= @topic.title %></h3>

<%= t('view.login_user') %>: <%= current_user.name %><br>

<%= link_to t('view.edit_topic'), edit_topic_path(@topic), class: 'btn btn-primary' %><br>

<div class='row'>
  <div class='col-5'>
    <%= t('view.created_by') %>: <%= @topic.user.name %> / email: <%= @topic.user.email %><br>
    <%= t('view.belong_to') %>: <%= link_to "#{@topic.team.name}", team_path(@topic.team) %><br>
    <%= t('topic.priority') %>: <%= @topic.priority %><br>
    <%= t('topic.deadline') %>: <%= @topic.deadline.strftime("%Y-%m-%d") %><br>
    <%= t('topic.status') %>: <%= @topic.status %><br>
  </div>
</div>

<div class='row'>
  <div class='col-8'>
<%= t('topic.description') %>: <%= @topic.description %><br>
  </div>
</div>

<%# # Button to delete topic %>
<%# # Leader or topic maker can delete %>
<% if current_user == @topic.user || current_user == @topic.team.leader %>
<%= button_to t('view.delete'), topic_path(@topic), method: :delete, data: { confirm: '本当にいいですか？' }, class: 'btn btn-danger' %>
<% end %>

<%# # Render tasks table %>
<%= render 'topic_contents' %>

<%# # Render form to create new task %>
<%= render 'tasks/task_form' %>
